<% include ../partials/header %>

<div class="row">
    <div class="col-12 mg-bt-20 page-template">
        <h3>
            Actions:
        </h3>
        <div class="row mg-bt-20">
            <div class="col-12 mg-bt-20">
                <div class="page-template">
                    <h4 class="mg-bt-20">
                        FAQ's
                    </h4>
                    <div class="mg-20">
                        <button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#newFAQModal">
                            New FAQ
                        </button>
                    </div>
                    <hr>
                    <table class="table table-responsive" id="table">
                        <thead>
                            <tr>
                                <th scope="col">Question</th>
                                <th scope="col">Answer</th>
                                <th scope="col">Video</th>
                                <th scope="col">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% faq.forEach(faq => { %>
                                <tr>
                                    <th scope="row"><%= faq.question %></th>
                                    <td><%- faq.answer %></td>
                                    <td><% if(faq.video){ %> YES <% }else{ %> NO <% } %></td>
                                    <td>
                                        <a class="btn btn-warning btn-sm" href="/admin/faq/edit/<%= faq.id %>">Edit</a>
                                        <button class="btn btn-danger btn-sm" type="button" data-toggle="modal" data-target="#modal<%= faq.id %>">
                                            Delete
                                        </button>
                                    </td>
                                </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-12">
                <div class="page-template">
                    <h4 class="mg-bt-20">
                        Guides
                    </h4>
                    <div class="mg-20">
                        <button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#newGuideModal">
                            New Guide
                        </button>
                    </div>
                    <table class="table table-responsive" id="table">
                        <thead>
                            <tr>
                                <th scope="col">Title</th>
                                <th scope="col">Description</th>
                                <th scope="col">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% guide.forEach(guide => { %>
                                <tr>
                                    <th scope="row"><%= guide.title %></th>
                                    <td><%- guide.description %></td>
                                    <td>
                                        <button class="btn btn-warning btn-sm" type="button" data-toggle="modal" data-target="#modaledit<%= guide.id %>">
                                            Edit
                                        </button>
                                        <button class="btn btn-danger btn-sm" type="button" data-toggle="modal" data-target="#modal<%= guide.id %>">
                                            Delete
                                        </button>
                                    </td>
                                </tr>
                            <% })
                            <files.forEach(file => { %>
                                <tr>
                                    <th scope="row"><%= file.metadata.title %></th>
                                    <td><% file.metadata.description %></td>
                                    <td>
                                        <button class="btn btn-warning btn-sm" type="button" data-toggle="modal" data-target="#modaledit<%= file.metadata.uuid %>">
                                            Edit
                                        </button>
                                        <button class="btn btn-danger btn-sm" type="button" data-toggle="modal" data-target="#modal<%= file.metadata.uuid %>">
                                            Delete
                                        </button>
                                    </td>
                                </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <h3>
            Quick Actions:
        </h3>
        <div class="row">
            <div class="col-lg-4 col-md-6 mg-bt-20">
                <div class="page-template">
                    <h3>Add a new HRN Number:</h3>
                    <hr>
                    <form action="/admin/hrn/add" method="POST" class="form pad-20">
                        <div class="row justify-content-md-center">
                            <input type="text" class="form-control" placeholder="hrn number input" name="hrnNumber">
                            <input type="text" class="form-control" placeholder="House Number" name="houseNumber">
                            <input type="text" class="form-control" placeholder="Post Code" name="postCode">
                            <button class="btn btn-info btn-sm mg-20">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<% faq.forEach(faq => { %>
    <div class="modal fade" id="modal<%= faq.id %>" tabindex="-1" role="dialog" aria-labelledby="<%= faq.question %>Modal"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="<%= faq.question %>Modal">Confirmation:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this Question?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <a href="#">
                        <button type="button" class="btn btn-danger">Delete</button>
                    </a>
                </div>
            </div>
        </div>
    </div>
<% })
files.forEach(file => { %>
    <div class="modal fade" id="modal<%= file.metadata.uuid %>" tabindex="-1" role="dialog" aria-labelledby="<%= file.metadata.title %>Modal"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="<%= file.metadata.title %>Modal">Confirmation:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this Guide?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <a href="#">
                        <button type="button" class="btn btn-danger">Delete</button>
                    </a>
                </div>
            </div>
        </div>
    </div>
<% })
guide.forEach(guide => { %>
    <div class="modal fade" id="modal<%= guide.id %>" tabindex="-1" role="dialog" aria-labelledby="<%= guide.title %>Modal"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="<%= guide.title %>Modal">Confirmation:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this Guide?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <a href="#">
                        <button type="button" class="btn btn-danger">Delete</button>
                    </a>
                </div>
            </div>
        </div>
    </div>
<% }) %>
<div class="modal fade" id="newFAQModal" tabindex="-1" role="dialog" aria-labelledby="newFAQModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="newFAQModalLabel">New FAQ</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="/admin/faq/add" method="POST" class="form pad-20">
                <div class="modal-body">
                    <div class="row justify-content-md-center">
                        <div class="col-12">
                            <div class="form-group form-row">
                                <label for="faqQ" class="form-label">Question:</label>
                                <input type="text" class="form-control" placeholder="FAQ question..." name="faqQ" id="faqQ"
                                    required>
                            </div>
                            <div class="form-group form-row">
                                <label class="form-label">Answer:</label>
                                <textarea class="form-control" placeholder="Answer to the FAQ question..." name="faqA"></textarea>
                            </div>
                            <div class="form-group form-row">
                                <label class="form-label" for="faqV">Video Link</label>
                                <input class="form-control" type="text"
                                    placeholder="Video URL: e.g https://www.youtube.com/watch?v=P2vt4YvwOQg" name="video" id="faqV">
                                <small class="form-text text-muted">Please upload your video to YouTube and
                                    paste the
                                    video
                                    URL</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-info">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="modal fade" id="newGuideModal" tabindex="-1" role="dialog" aria-labelledby="newGuideModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="newGuideModalLabel">New Guide</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="/admin/guide/add" method="POST" enctype="multipart/form-data" class="form pad-20">
                <div class="modal-body">
                    <div class="row justify-content-md-center">
                        <div class="col-12">
                            <div class="form-group form-row">
                                <label for="gTitle" class="form-label">Title:</label>
                                <input type="text" class="form-control" placeholder="Guide Title.." name="gTitle"
                                    id="gTitle" required>
                            </div>
                            <div class="form-group form-row">
                                <label for="gTitle" class="form-label">Description:</label>
                                <input type="text" class="form-control" placeholder="Brief description..." name="fileDescription" id="gTitle"
                                    required>
                            </div>
                            <div class="form-group form-row">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="fileUpload" value="false" required>
                                    <label class="form-check-label" for="fileUploadNo">Write Guide</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="fileUpload" value="true">
                                    <label class="form-check-label" for="fileUploadYes">Upload Guide</label>
                                </div>
                            </div>
                            <div class="form-group form-row" id="writeGuide">
                                <div class="col-12">
                                    <label class="form-label" for="rich-text">Write a new guide:</label><br>
                                </div>
                                <div>
                                    <textarea class="form-control" id="summernote" name="guide"></textarea>
                                </div>
                                <div>
                                    <small class="form-text text-muted">You do not need to write a guide if you plan
                                            on
                                            uploading a pre-written one.</small>
                                </div>
                            </div>
                            <div class="form-group form-row" id="uploadGuide">
                                <label class="form-label" for="guide-upload">Upload a Guide:</label>
                                <input class="form-control-file" type="file" name="upload" id="guide-upload">
                                <small class="form-text text-muted">Supoprted Files:<br>.pdf</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-info">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>
<% guide.forEach(guide => { %>
    <div class="modal fade" id="modaledit<%= guide.id %>" tabindex="-1" role="dialog" aria-labelledby="editGuideModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editGuideModalLabel">New Guide</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="/admin/guide/edit/<%= guide.id %>" method="POST" enctype="multipart/form-data" class="form pad-20">
                    <div class="modal-body">
                        <div class="row justify-content-md-center">
                            <div class="col-12">
                                <div class="form-group form-row">
                                    <label for="gTitle" class="form-label">Title:</label>
                                    <input type="text" class="form-control" placeholder="Guide Title.." name="gTitleEdit"
                                        id="gTitle" value="<%= guide.title %>" required>
                                </div>
                                <div class="form-group form-row">
                                    <label for="gTitle" class="form-label">Description:</label>
                                    <input type="text" class="form-control" placeholder="Brief description..."
                                        name="fileDescriptionEdit" id="gTitle" value="<%= guide.description %>" required>
                                </div>
                                <div class="form-group form-row">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" checked type="radio" name="fileUploadEdit" value="false"
                                            required>
                                        <label class="form-check-label" for="fileUploadNo">Write Guide</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="fileUploadEdit" value="true">
                                        <label class="form-check-label" for="fileUploadYes">Upload Guide</label>
                                    </div>
                                </div>
                                <div class="form-group form-row" id="writeGuideEdit">
                                    <div class="col-12">
                                        <label class="form-label" for="rich-text">Write a new guide:</label><br>
                                    </div>
                                    <div>
                                        <textarea class="form-control" id="summernote1" name="guide"><%- guide.guide %></textarea>
                                    </div>
                                    <div>
                                        <small class="form-text text-muted">You do not need to write a guide if you plan
                                            on
                                            uploading a pre-written one.</small>
                                    </div>
                                </div>
                                <div class="form-group form-row" id="uploadGuideEdit">
                                    <label class="form-label" for="guide-upload">Upload a Guide:</label>
                                    <input class="form-control-file" type="file" name="upload" id="guide-upload">
                                    <small class="form-text text-muted">Supoprted Files:<br>.pdf</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-info">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
<% }) %>

<% include ../partials/footer %>